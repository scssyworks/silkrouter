{"version":3,"file":"silkrouter.esm.js","sources":["../../src/js/utils/assign.js","../../src/js/utils/constants.js","../../src/js/utils/getGlobal.js","../../node_modules/deparam.js/dist/esm/deparam.esm.js","../../src/js/utils/utils.js","../../src/js/utils/triggerEvent.js","../../src/js/api/set/index.js","../../src/js/utils/getPath.js","../../src/js/api/routerEvent/index.js","../../src/js/api/collate/index.js","../../src/js/api/callOnce/index.js","../../src/js/api/router/RouterCore.js","../../src/js/api/router/Router.js"],"sourcesContent":["/**\n * Function to extend an object with new and updated properties\n * @private\n * @returns {object}\n */\nexport function assign(...args) {\n  return Object.assign(...args);\n}\n","/**\n * Router constants\n */\nexport const POP_STATE = 'popstate';\nexport const REG_ROUTE_PARAMS = /:[^/]+/g;\nexport const REG_PATHNAME = /^\\/(?=[^?]*)/;\nexport const REG_COMPLEX = /\\[/;\nexport const REG_VARIABLE = /([^[]+)\\[([^[]*)\\]/;\nexport const REG_REPLACE_BRACKETS = /\\[([^[]*)\\]/;\nexport const REG_REPLACE_NEXTPROP = /[^[]+/;\nexport const HISTORY_UNSUPPORTED = 'History unsupported!';\nexport const INVALID_ROUTE = 'Route string is not a pure route';\nexport const VIRTUAL_PUSHSTATE = 'vpushstate';\nexport const CACHED_FIELDS = [\n  'route',\n  'hashRouting',\n  'path',\n  'hash',\n  'search',\n  'hashSearch',\n  'data',\n];\nexport const AMP = '&';\nexport const QRY = '?';\nexport const EQ = '=';\nexport const EMPTY = '';\nexport const UNDEF = void 0;\nexport const TYPEOF_STR = typeof EMPTY;\nexport const TYPEOF_BOOL = typeof true;\nexport const TYPEOF_UNDEF = typeof UNDEF;\nexport const TYPEOF_OBJ = typeof {};\nexport const TYPEOF_NUM = typeof 0;\nexport const TYPEOF_FUNC = typeof (() => {});\nexport const STATE = 'State';\nexport const PUSH = `push${STATE}`;\nexport const REPLACE = `replace${STATE}`;\n","import { TYPEOF_UNDEF } from './constants';\n\nexport function getGlobal() {\n  return typeof globalThis !== TYPEOF_UNDEF ? globalThis : global || self;\n}\n","/*!\n * Deparam plugin converts query string to a valid JavaScript object\n * Released under MIT license\n * @name Deparam.js\n * @author Sachin Singh <https://github.com/scssyworks/deparam.js>\n * @version 3.0.6\n * @license MIT\n */\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\n/*!\n * is-number <https://github.com/jonschlinkert/is-number>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nvar isNumber = function(num) {\n  if (typeof num === 'number') {\n    return num - num === 0;\n  }\n  if (typeof num === 'string' && num.trim() !== '') {\n    return Number.isFinite ? Number.isFinite(+num) : isFinite(+num);\n  }\n  return false;\n};\n\nvar isObject = function isObject(x) {\n\treturn typeof x === 'object' && x !== null;\n};\n\nvar UNDEF = void 0; // Results to undefined\n// Typeof undefined\n\nvar TYPEOF_UNDEF = _typeof(UNDEF); // Typeof string\n\n\nvar TYPEOF_STR = _typeof(\"\"); // location var\n\n\nvar loc = (typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) !== TYPEOF_UNDEF ? window.location : null; // Shorthand for built-ins\n\nvar isArr = Array.isArray;\n/**\n * Checks if current key is safe\n * @param {string} key Current key\n * @returns {boolean}\n */\n\nfunction isSafe(key) {\n  return [\"__proto__\", \"prototype\"].indexOf(key) === -1;\n}\n/**\n * Shorthand for Object.prototype.hasOwnProperty\n * @param {any} obj Any object\n * @param {string} key key\n * @returns {boolean} true or false if object has the property\n */\n\n\nfunction hasOwn(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n/**\n * Returns true of input query string is complex\n * @param {string} q Query string\n * @returns {boolean} true or false\n */\n\n\nfunction ifComplex(q) {\n  return /\\[/.test(q);\n}\n/**\n * Returns an object without a prototype\n * @returns {{[key in string|number]: any}} Object without __proto__\n */\n\n\nfunction obNull() {\n  return Object.create(null);\n}\n/**\n * Returns a parsed query object\n * @param {string} qs Query string\n * @param {boolean} coerce Coerce values\n * @returns {{[key in string|number]: any}} Query object\n */\n\n\nfunction lib(qs, coerce) {\n  var _this = this;\n\n  if (_typeof(qs) !== TYPEOF_STR) {\n    qs = loc ? loc.search : \"\";\n  }\n\n  qs = qs.substring(qs.charAt(0) === \"?\");\n  var queryObject = obNull();\n\n  if (qs) {\n    qs.split(\"&\").forEach(function (qq) {\n      var qArr = qq.split(\"=\").map(function (part) {\n        return decodeURIComponent(part);\n      });\n\n      if (ifComplex(qArr[0])) {\n        complex.apply(_this, [].concat(qArr).concat([queryObject, coerce]));\n      } else {\n        simple.apply(_this, [qArr, queryObject, false, coerce]);\n      }\n    });\n  }\n\n  return queryObject;\n}\n/**\n * Converts an array to equivalent object\n * @param {any[]} arr Any array\n * @returns {any} Any object\n */\n\n\nfunction toObject(arr) {\n  var convertedObj = obNull();\n\n  if (isArr(arr)) {\n    arr.forEach(function (value, index) {\n      convertedObj[index] = value;\n    });\n  }\n\n  return convertedObj;\n}\n/**\n * Converts array to an object if required\n * @param {any} ob Any object\n * @param {booleab} isNextNumber Test for next key\n * @returns {any} Any object\n */\n\n\nfunction resolve(ob, isNextNumber) {\n  if (_typeof(ob) === TYPEOF_UNDEF) return isNextNumber ? [] : obNull();\n  return isNextNumber ? ob : toObject(ob);\n}\n/**\n * Resolves the target object for next iteration\n * @param {any} ob current reference object\n * @param {string} nextProp reference property in current object\n * @returns {any} Resolved object for next iteration\n */\n\n\nfunction resolveObj(ob, nextProp) {\n  if (isObject(ob) && !isArr(ob)) return {\n    ob: ob\n  };\n  if (isArr(ob) || _typeof(ob) === TYPEOF_UNDEF) return {\n    ob: resolve(ob, isNumber(nextProp))\n  };\n  return {\n    ob: [ob],\n    push: ob !== null\n  };\n}\n/**\n * Handles complex query parameters\n * @param {string} key Query key\n * @param {string} value Query value\n * @param {Object} obj Query object\n * @returns {void}\n */\n\n\nfunction complex(key, value, obj, doCoerce) {\n  var match = key.match(/([^\\[]+)\\[([^\\[]*)\\]/) || [];\n\n  if (match.length === 3) {\n    var prop = match[1];\n    var nextProp = match[2];\n    key = key.replace(/\\[([^\\[]*)\\]/, \"\");\n\n    if (ifComplex(key)) {\n      if (nextProp === \"\") nextProp = \"0\";\n      key = key.replace(/[^\\[]+/, nextProp);\n      complex(key, value, obj[prop] = resolveObj(obj[prop], nextProp).ob, doCoerce);\n    } else if (nextProp) {\n      if (isSafe(prop) && isSafe(nextProp)) {\n        var _resolveObj = resolveObj(obj[prop], nextProp),\n            ob = _resolveObj.ob,\n            push = _resolveObj.push;\n\n        obj[prop] = ob;\n        var nextOb = push ? obNull() : obj[prop];\n        nextOb[nextProp] = coerce(value, !doCoerce);\n\n        if (push) {\n          obj[prop].push(nextOb);\n        }\n      }\n    } else {\n      simple([match[1], value], obj, true, doCoerce);\n    }\n  }\n}\n/**\n * Handles simple query\n * @param {array} qArr Query list\n * @param {Object} queryObject Query object\n * @param {boolean} toArray Test for conversion to array\n * @returns {void}\n */\n\n\nfunction simple(qArr, queryObject, toArray, doCoerce) {\n  var key = qArr[0];\n  var value = qArr[1];\n\n  if (isSafe(key)) {\n    value = coerce(value, !doCoerce);\n\n    if (hasOwn(queryObject, key)) {\n      queryObject[key] = isArr(queryObject[key]) ? queryObject[key] : [queryObject[key]];\n      queryObject[key].push(value);\n    } else {\n      queryObject[key] = toArray ? [value] : value;\n    }\n  }\n}\n/**\n * Converts input value to their appropriate types\n * @param {any} value Input value\n * @param {boolean} skip Test for skipping coercion\n * @returns {any} Coerced value\n */\n\n\nfunction coerce(value, skip) {\n  // eslint-disable-next-line\n  if (value == null) {\n    return \"\";\n  }\n\n  if (skip || _typeof(value) !== TYPEOF_STR) {\n    return value;\n  }\n\n  value = value.trim();\n\n  if (isNumber(value)) {\n    return +value;\n  }\n\n  switch (value) {\n    case \"null\":\n      return null;\n\n    case TYPEOF_UNDEF:\n      return UNDEF;\n\n    case \"true\":\n      return true;\n\n    case \"false\":\n      return false;\n\n    case \"NaN\":\n      return NaN;\n\n    default:\n      return value;\n  }\n}\n\nexport { lib as default, isNumber, isObject };\n//# sourceMappingURL=deparam.esm.js.map\n","import { isNumber, isObject } from 'deparam.js';\nimport { EMPTY, REG_PATHNAME, TYPEOF_BOOL, TYPEOF_STR } from './constants';\n\n/**\n * Shorthand for Array.isArray\n */\nexport const isArr = Array.isArray;\n\n/**\n * Shorthand for Object.keys\n */\nexport const oKeys = Object.keys;\n\n/**\n * Safely trims string\n * @param {string} str String\n */\nexport function trim(str) {\n  return typeof str === TYPEOF_STR ? str.trim() : EMPTY;\n}\n\n/**\n * Checks if given route is valid\n * @private\n * @param {string} route Route string\n */\nexport function isValidRoute(route) {\n  return REG_PATHNAME.test(route);\n}\n\n/**\n * Checks if key is present in provided object\n * @param {object} ob Object\n * @param {*} key Key\n */\nexport function hasOwn(ob, key) {\n  return Object.prototype.hasOwnProperty.call(ob, key);\n}\n\n/**\n * Loops over an array like object\n * @param {object} arrayObj Array or array like object\n * @param {function} callback Callback function\n */\nexport function each(arrayObj, callback) {\n  if (isObject(arrayObj)) {\n    const keys = oKeys(arrayObj);\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      const cont = callback(arrayObj[key], isNumber(key) ? +key : key);\n      if (typeof cont === TYPEOF_BOOL) {\n        if (!cont) {\n          break;\n        }\n      }\n    }\n  }\n}\n","import { TYPEOF_STR } from './constants';\nimport { getGlobal } from './getGlobal';\nimport { each } from './utils';\n\n/**\n * Function to trigger custom event\n * @param {Node|NodeList|HTMLCollection|Node[]} target Target element or list\n * @param {string} eventType Event type\n * @param {any[]} data Data to be passed to handler\n */\nexport function trigger(target, eventType, data) {\n  target = Array.from(target instanceof Node ? [target] : target);\n  if (target.length && typeof eventType === TYPEOF_STR) {\n    each(target, (el) => {\n      const win = getGlobal();\n      const customEvent = new win.CustomEvent(eventType, {\n        bubbles: true,\n        cancelable: true,\n        detail: data || [],\n      });\n      el.dispatchEvent(customEvent);\n    });\n  }\n}\n","import { trigger } from '../../utils/triggerEvent';\nimport {\n  VIRTUAL_PUSHSTATE,\n  INVALID_ROUTE,\n  UNDEF,\n  EMPTY,\n  QRY,\n  REPLACE,\n  PUSH,\n} from '../../utils/constants';\nimport { isValidRoute, trim } from '../../utils/utils';\n\n/**\n * Sets the current route\n * @private\n * @typedef {import('./types').RouteConfig} RouteConfig\n * @param {string} routeStr Route string\n * @param {RouteConfig} [routeConfig] Route config\n * @returns {void}\n */\nexport default function set(routeStr, routeConfig = {}) {\n  const [route, qs] = routeStr.split(QRY);\n  const {\n    replace = false,\n    preventDefault = false,\n    queryString = qs,\n    data,\n    pageTitle = null,\n  } = routeConfig;\n  const { preservePath, hashRouting: hash, history, context } = this.config;\n  // Resolve to URL query string if it's not explicitly passed\n  routeStr = trim(route);\n  if (isValidRoute(routeStr)) {\n    const path = routeStr;\n    if (hash) {\n      routeStr = `${preservePath ? '' : '/'}#${routeStr}`;\n    }\n    // Append query string\n    routeStr = `${routeStr}${trim(\n      queryString ? `${QRY + queryString}` : EMPTY\n    )}`;\n    const savedState = history.state || { idx: 0 };\n    history[replace ? REPLACE : PUSH](\n      {\n        data,\n        idx: savedState.idx + 1,\n      },\n      pageTitle,\n      routeStr\n    );\n    if (!preventDefault && path) {\n      trigger(context, VIRTUAL_PUSHSTATE, [\n        {\n          path,\n          hash,\n        },\n        UNDEF,\n        this,\n      ]);\n    }\n  } else {\n    throw new TypeError(INVALID_ROUTE);\n  }\n}\n","import { QRY } from './constants';\nimport { trim } from './utils';\n\nexport const getPath = (isHash, location) => {\n  return trim(\n    isHash ? location.hash.substring(1).split(QRY)[0] : location.pathname\n  );\n};\n","import { QRY } from '../../utils/constants';\nimport { trim } from '../../utils/utils';\nexport default class RouterEvent {\n  constructor(routeInfo, currentEvent) {\n    // Set relevant parameters\n    const [routeObject, originalEvent, routerInstance] = routeInfo;\n    const { location, history } = routerInstance.config;\n    this.route = routeObject.path;\n    this.isHashRoute = routeObject.hash;\n    this.router = routerInstance;\n    this.currentEvent = originalEvent || currentEvent;\n    this.query = {\n      path: trim(location.search.substring(1)),\n      hash: trim(location.hash.split(QRY)[1]),\n    };\n    const { state } = originalEvent || {};\n    const { data, idx = 0 } = state || history.state || {};\n    this.data = data;\n    this.index = idx;\n  }\n}\n","import { Observable } from 'rxjs';\nimport RouterEvent from '../routerEvent';\n\nexport default function collate() {\n  return (observable) =>\n    new Observable((subscriber) => {\n      const subn = observable.subscribe({\n        next: (event) => {\n          const routerInstance = event.detail[2];\n          if (routerInstance === this) {\n            subscriber.next(new RouterEvent(event.detail, event));\n          }\n        },\n        error: subscriber.error,\n        complete: subscriber.complete,\n      });\n      return () => {\n        subn.unsubscribe();\n      };\n    });\n}\n","import { Observable } from 'rxjs';\nimport { UNDEF } from '../../utils/constants';\nimport { getPath } from '../../utils/getPath';\nimport RouterEvent from '../routerEvent';\n\nexport default function callOnce(isDone) {\n  const { hashRouting: hash, location, init } = this.config;\n  const path = getPath(hash, location);\n  return (observable) =>\n    new Observable((subscriber) => {\n      const subn = observable.subscribe(subscriber);\n      if (!isDone) {\n        isDone = true;\n        if (init && path) {\n          subscriber.next(new RouterEvent([{ path, hash }, UNDEF, this]));\n        }\n      }\n      return () => {\n        subn.unsubscribe();\n      };\n    });\n}\n","import { fromEvent } from 'rxjs';\nimport {\n  HISTORY_UNSUPPORTED,\n  POP_STATE,\n  PUSH,\n  TYPEOF_FUNC,\n  VIRTUAL_PUSHSTATE,\n} from '../../utils/constants';\nimport { getPath } from '../../utils/getPath';\nimport { trigger } from '../../utils/triggerEvent';\nimport collate from '../collate';\nimport callOnce from '../callOnce';\n\n/**\n * Core router class to handle basic routing functionality\n */\nexport class RouterCore {\n  /**\n   * Router core constructor\n   * @typedef {import('./types').RouterCoreConfig} RouterCoreConfig\n   * @param {RouterCoreConfig} routerCoreConfig Route core configuration\n   */\n  constructor({ global, history, context, location, hash }) {\n    if (!history[PUSH]) {\n      throw new Error(HISTORY_UNSUPPORTED);\n    }\n    this.__paths__ = [];\n    this.popStateSubscription = fromEvent(global, POP_STATE).subscribe((e) => {\n      const path = getPath(hash, location);\n      if (path) {\n        trigger(context, VIRTUAL_PUSHSTATE, [{ path, hash }, e, this]);\n      }\n    });\n    this.listeners = fromEvent(context, VIRTUAL_PUSHSTATE).pipe(\n      collate.apply(this)\n    );\n  }\n  pipe(...ops) {\n    return this.listeners.pipe(callOnce.apply(this), ...ops);\n  }\n  subscribe(...fns) {\n    return this.pipe().subscribe(...fns);\n  }\n  /**\n   * Destroys current router instance\n   * @param {() => void} callback Callback for destroy function\n   */\n  destroy(callback) {\n    if (typeof callback === TYPEOF_FUNC) {\n      callback();\n    }\n    this.popStateSubscription.unsubscribe(); // Unsubscribe popstate event\n    this.__paths__.length = 0;\n  }\n}\n","import { assign } from '../../utils/assign';\nimport set from '../set';\nimport { getGlobal } from '../../utils/getGlobal';\nimport { RouterCore } from './RouterCore';\n\n/**\n * Browser router to handle routing logic\n */\nexport class Router extends RouterCore {\n  /**\n   * Router constructor\n   * @typedef {import('./types').RouterConfig} RouterConfig\n   * @param {RouterConfig} config\n   */\n  constructor(config = {}) {\n    const global = getGlobal();\n    const { history, location, document } = global;\n    const context = document.body;\n    super({\n      global,\n      history,\n      location,\n      context,\n      hash: config.hashRouting,\n    });\n    this.config = Object.freeze(\n      assign({ init: true, hashRouting: false, preservePath: false }, config, {\n        context,\n        history,\n        location,\n      })\n    );\n    if (config.hashRouting && !location.hash) {\n      this.set('/', {\n        replace: true,\n        preventDefault: true, // Don't execute route handlers\n      });\n    }\n  }\n  /**\n   * Sets the current route path\n   * @typedef {import('../set/types').RouteConfig} RouteConfig\n   * @param {string} path Route path\n   * @param {RouteConfig} routeConfig Route config\n   */\n  set(path, routeConfig) {\n    set.apply(this, [path, routeConfig]);\n  }\n}\n"],"names":["assign","Object","arguments","POP_STATE","REG_PATHNAME","HISTORY_UNSUPPORTED","INVALID_ROUTE","VIRTUAL_PUSHSTATE","QRY","EMPTY","UNDEF","TYPEOF_STR","TYPEOF_BOOL","TYPEOF_UNDEF","TYPEOF_FUNC","STATE","PUSH","REPLACE","getGlobal","globalThis","global","self","oKeys","keys","trim","str","isValidRoute","route","test","each","arrayObj","callback","isObject","i","length","key","cont","isNumber","trigger","target","eventType","data","Array","from","Node","el","win","customEvent","CustomEvent","bubbles","cancelable","detail","dispatchEvent","set","routeStr","routeConfig","undefined","qs","split","replace","preventDefault","queryString","pageTitle","preservePath","hashRouting","hash","history","context","config","path","savedState","state","idx","TypeError","getPath","isHash","location","substring","pathname","RouterEvent","constructor","routeInfo","currentEvent","routeObject","originalEvent","routerInstance","isHashRoute","router","query","search","index","collate","observable","Observable","subscriber","subn","subscribe","next","event","error","complete","unsubscribe","callOnce","isDone","init","RouterCore","_ref","Error","__paths__","popStateSubscription","fromEvent","e","listeners","pipe","apply","_len","ops","_key","destroy","Router","document","body","freeze"],"mappings":"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"}