{"version":3,"file":"silkrouter.esm.js","sources":["../../src/js/utils/assign.js","../../src/js/utils/constants.js","../../src/js/utils/getGlobal.js","../../node_modules/deparam.js/dist/esm/deparam.esm.js","../../src/js/utils/utils.js","../../src/js/utils/triggerEvent.js","../../src/js/api/routerEvent/index.js","../../src/js/api/collate/index.js","../../src/js/utils/getPath.js","../../src/js/api/bindRouterEvents/index.js","../../src/js/utils/query.js","../../src/js/api/resolveQuery/index.js","../../src/js/api/set/index.js","../../src/js/api/callOnce/index.js","../../src/js/api/router/index.js","../../src/js/utils/params.js","../../src/js/operators/index.js"],"sourcesContent":["/**\n * Function to extend an object with new and updated properties\n * @private\n * @returns {object}\n */\nexport function assign(...args) {\n  return Object.assign(...args);\n}\n","/**\n * Router constants\n */\nexport const POP_STATE = 'popstate';\nexport const REG_ROUTE_PARAMS = /:[^/]+/g;\nexport const REG_PATHNAME = /^\\/(?=[^?]*)/;\nexport const REG_COMPLEX = /\\[/;\nexport const REG_VARIABLE = /([^[]+)\\[([^[]*)\\]/;\nexport const REG_REPLACE_BRACKETS = /\\[([^[]*)\\]/;\nexport const REG_REPLACE_NEXTPROP = /[^[]+/;\nexport const HISTORY_UNSUPPORTED = 'History unsupported!';\nexport const INVALID_ROUTE = 'Route string is not a pure route';\nexport const VIRTUAL_PUSHSTATE = 'vpushstate';\nexport const CACHED_FIELDS = [\n  'route',\n  'hashRouting',\n  'path',\n  'hash',\n  'search',\n  'hashSearch',\n  'data',\n];\nexport const AMP = '&';\nexport const QRY = '?';\nexport const EQ = '=';\nexport const EMPTY = '';\nexport const UNDEF = void 0;\nexport const TYPEOF_STR = typeof EMPTY;\nexport const TYPEOF_BOOL = typeof true;\nexport const TYPEOF_UNDEF = typeof UNDEF;\nexport const TYPEOF_OBJ = typeof {};\nexport const TYPEOF_NUM = typeof 0;\nexport const TYPEOF_FUNC = typeof (() => {});\nexport const STATE = 'State';\nexport const PUSH = `push${STATE}`;\nexport const REPLACE = `replace${STATE}`;\n","import { TYPEOF_UNDEF } from './constants';\n\nexport function getGlobal() {\n  return typeof globalThis !== TYPEOF_UNDEF ? globalThis : global || self;\n}\n","/*!\n * Deparam plugin converts query string to a valid JavaScript object\n * Released under MIT license\n * @name Deparam.js\n * @author Sachin Singh <https://github.com/scssyworks/deparam.js>\n * @version 3.0.6\n * @license MIT\n */\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\n/*!\n * is-number <https://github.com/jonschlinkert/is-number>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nvar isNumber = function(num) {\n  if (typeof num === 'number') {\n    return num - num === 0;\n  }\n  if (typeof num === 'string' && num.trim() !== '') {\n    return Number.isFinite ? Number.isFinite(+num) : isFinite(+num);\n  }\n  return false;\n};\n\nvar isObject = function isObject(x) {\n\treturn typeof x === 'object' && x !== null;\n};\n\nvar UNDEF = void 0; // Results to undefined\n// Typeof undefined\n\nvar TYPEOF_UNDEF = _typeof(UNDEF); // Typeof string\n\n\nvar TYPEOF_STR = _typeof(\"\"); // location var\n\n\nvar loc = (typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) !== TYPEOF_UNDEF ? window.location : null; // Shorthand for built-ins\n\nvar isArr = Array.isArray;\n/**\n * Checks if current key is safe\n * @param {string} key Current key\n * @returns {boolean}\n */\n\nfunction isSafe(key) {\n  return [\"__proto__\", \"prototype\"].indexOf(key) === -1;\n}\n/**\n * Shorthand for Object.prototype.hasOwnProperty\n * @param {any} obj Any object\n * @param {string} key key\n * @returns {boolean} true or false if object has the property\n */\n\n\nfunction hasOwn(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n/**\n * Returns true of input query string is complex\n * @param {string} q Query string\n * @returns {boolean} true or false\n */\n\n\nfunction ifComplex(q) {\n  return /\\[/.test(q);\n}\n/**\n * Returns an object without a prototype\n * @returns {{[key in string|number]: any}} Object without __proto__\n */\n\n\nfunction obNull() {\n  return Object.create(null);\n}\n/**\n * Returns a parsed query object\n * @param {string} qs Query string\n * @param {boolean} coerce Coerce values\n * @returns {{[key in string|number]: any}} Query object\n */\n\n\nfunction lib(qs, coerce) {\n  var _this = this;\n\n  if (_typeof(qs) !== TYPEOF_STR) {\n    qs = loc ? loc.search : \"\";\n  }\n\n  qs = qs.substring(qs.charAt(0) === \"?\");\n  var queryObject = obNull();\n\n  if (qs) {\n    qs.split(\"&\").forEach(function (qq) {\n      var qArr = qq.split(\"=\").map(function (part) {\n        return decodeURIComponent(part);\n      });\n\n      if (ifComplex(qArr[0])) {\n        complex.apply(_this, [].concat(qArr).concat([queryObject, coerce]));\n      } else {\n        simple.apply(_this, [qArr, queryObject, false, coerce]);\n      }\n    });\n  }\n\n  return queryObject;\n}\n/**\n * Converts an array to equivalent object\n * @param {any[]} arr Any array\n * @returns {any} Any object\n */\n\n\nfunction toObject(arr) {\n  var convertedObj = obNull();\n\n  if (isArr(arr)) {\n    arr.forEach(function (value, index) {\n      convertedObj[index] = value;\n    });\n  }\n\n  return convertedObj;\n}\n/**\n * Converts array to an object if required\n * @param {any} ob Any object\n * @param {booleab} isNextNumber Test for next key\n * @returns {any} Any object\n */\n\n\nfunction resolve(ob, isNextNumber) {\n  if (_typeof(ob) === TYPEOF_UNDEF) return isNextNumber ? [] : obNull();\n  return isNextNumber ? ob : toObject(ob);\n}\n/**\n * Resolves the target object for next iteration\n * @param {any} ob current reference object\n * @param {string} nextProp reference property in current object\n * @returns {any} Resolved object for next iteration\n */\n\n\nfunction resolveObj(ob, nextProp) {\n  if (isObject(ob) && !isArr(ob)) return {\n    ob: ob\n  };\n  if (isArr(ob) || _typeof(ob) === TYPEOF_UNDEF) return {\n    ob: resolve(ob, isNumber(nextProp))\n  };\n  return {\n    ob: [ob],\n    push: ob !== null\n  };\n}\n/**\n * Handles complex query parameters\n * @param {string} key Query key\n * @param {string} value Query value\n * @param {Object} obj Query object\n * @returns {void}\n */\n\n\nfunction complex(key, value, obj, doCoerce) {\n  var match = key.match(/([^\\[]+)\\[([^\\[]*)\\]/) || [];\n\n  if (match.length === 3) {\n    var prop = match[1];\n    var nextProp = match[2];\n    key = key.replace(/\\[([^\\[]*)\\]/, \"\");\n\n    if (ifComplex(key)) {\n      if (nextProp === \"\") nextProp = \"0\";\n      key = key.replace(/[^\\[]+/, nextProp);\n      complex(key, value, obj[prop] = resolveObj(obj[prop], nextProp).ob, doCoerce);\n    } else if (nextProp) {\n      if (isSafe(prop) && isSafe(nextProp)) {\n        var _resolveObj = resolveObj(obj[prop], nextProp),\n            ob = _resolveObj.ob,\n            push = _resolveObj.push;\n\n        obj[prop] = ob;\n        var nextOb = push ? obNull() : obj[prop];\n        nextOb[nextProp] = coerce(value, !doCoerce);\n\n        if (push) {\n          obj[prop].push(nextOb);\n        }\n      }\n    } else {\n      simple([match[1], value], obj, true, doCoerce);\n    }\n  }\n}\n/**\n * Handles simple query\n * @param {array} qArr Query list\n * @param {Object} queryObject Query object\n * @param {boolean} toArray Test for conversion to array\n * @returns {void}\n */\n\n\nfunction simple(qArr, queryObject, toArray, doCoerce) {\n  var key = qArr[0];\n  var value = qArr[1];\n\n  if (isSafe(key)) {\n    value = coerce(value, !doCoerce);\n\n    if (hasOwn(queryObject, key)) {\n      queryObject[key] = isArr(queryObject[key]) ? queryObject[key] : [queryObject[key]];\n      queryObject[key].push(value);\n    } else {\n      queryObject[key] = toArray ? [value] : value;\n    }\n  }\n}\n/**\n * Converts input value to their appropriate types\n * @param {any} value Input value\n * @param {boolean} skip Test for skipping coercion\n * @returns {any} Coerced value\n */\n\n\nfunction coerce(value, skip) {\n  // eslint-disable-next-line\n  if (value == null) {\n    return \"\";\n  }\n\n  if (skip || _typeof(value) !== TYPEOF_STR) {\n    return value;\n  }\n\n  value = value.trim();\n\n  if (isNumber(value)) {\n    return +value;\n  }\n\n  switch (value) {\n    case \"null\":\n      return null;\n\n    case TYPEOF_UNDEF:\n      return UNDEF;\n\n    case \"true\":\n      return true;\n\n    case \"false\":\n      return false;\n\n    case \"NaN\":\n      return NaN;\n\n    default:\n      return value;\n  }\n}\n\nexport { lib as default, isNumber, isObject };\n//# sourceMappingURL=deparam.esm.js.map\n","import { isNumber, isObject } from 'deparam.js';\nimport { EMPTY, REG_PATHNAME, TYPEOF_BOOL, TYPEOF_STR } from './constants';\n\n/**\n * Shorthand for Array.isArray\n */\nexport const isArr = Array.isArray;\n\n/**\n * Shorthand for Object.keys\n */\nexport const oKeys = Object.keys;\n\n/**\n * Safely trims string\n * @param {string} str String\n */\nexport function trim(str) {\n  return typeof str === TYPEOF_STR ? str.trim() : EMPTY;\n}\n\n/**\n * Checks if given route is valid\n * @private\n * @param {string} route Route string\n */\nexport function isValidRoute(route) {\n  return REG_PATHNAME.test(route);\n}\n\n/**\n * Checks if key is present in provided object\n * @param {object} ob Object\n * @param {*} key Key\n */\nexport function hasOwn(ob, key) {\n  return Object.prototype.hasOwnProperty.call(ob, key);\n}\n\n/**\n * Loops over an array like object\n * @param {object} arrayObj Array or array like object\n * @param {function} callback Callback function\n */\nexport function each(arrayObj, callback) {\n  if (isObject(arrayObj)) {\n    const keys = oKeys(arrayObj);\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      const cont = callback(arrayObj[key], isNumber(key) ? +key : key);\n      if (typeof cont === TYPEOF_BOOL) {\n        if (!cont) {\n          break;\n        }\n      }\n    }\n  }\n}\n","import { TYPEOF_STR } from './constants';\nimport { getGlobal } from './getGlobal';\nimport { each } from './utils';\n\n/**\n * Function to trigger custom event\n * @param {Node|NodeList|HTMLCollection|Node[]} target Target element or list\n * @param {string} eventType Event type\n * @param {any[]} data Data to be passed to handler\n */\nexport function trigger(target, eventType, data) {\n  target = Array.from(target instanceof Node ? [target] : target);\n  if (target.length && typeof eventType === TYPEOF_STR) {\n    each(target, (el) => {\n      const win = getGlobal();\n      const customEvent = new win.CustomEvent(eventType, {\n        bubbles: true,\n        cancelable: true,\n        detail: data || [],\n      });\n      el.dispatchEvent(customEvent);\n    });\n  }\n}\n","import { QRY } from '../../utils/constants';\nimport { trim } from '../../utils/utils';\nexport default class RouterEvent {\n  constructor(routeInfo, currentEvent) {\n    // Set relevant parameters\n    const routeObject = routeInfo[0];\n    const originalEvent = routeInfo[1];\n    const routerInstance = routeInfo[2];\n    const { location, history } = routerInstance.config;\n    this.route = routeObject.path;\n    this.hashRouting = routeObject.hash;\n    this.routerInstance = routerInstance;\n    this.virtualEvent = currentEvent || {};\n    this.originalEvent = originalEvent || {};\n    this.path = trim(location.pathname);\n    this.hash = location.hash;\n    this.search = trim(location.search.substring(1));\n    this.hashSearch = trim(location.hash && location.hash.split(QRY)[1]);\n    const { state } = this.originalEvent;\n    this.data = (state && state.data) || (history.state && history.state.data);\n  }\n}\n","import { Observable } from 'rxjs';\nimport RouterEvent from '../routerEvent';\n\nexport default function collate() {\n  return (observable) =>\n    new Observable((subscriber) => {\n      const subn = observable.subscribe({\n        next: (event) => {\n          const routerInstance = event.detail[2];\n          if (routerInstance === this) {\n            subscriber.next(new RouterEvent(event.detail, event));\n          }\n        },\n        error: subscriber.error,\n        complete: subscriber.complete,\n      });\n      return () => {\n        subn.unsubscribe();\n      };\n    });\n}\n","import { QRY } from './constants';\nimport { trim } from './utils';\n\nexport const getPath = (isHash, location) => {\n  return trim(\n    isHash ? location.hash.substring(1).split(QRY)[0] : location.pathname\n  );\n};\n","import { fromEvent } from 'rxjs';\nimport { POP_STATE, VIRTUAL_PUSHSTATE } from '../../utils/constants';\nimport { trigger } from '../../utils/triggerEvent';\nimport collate from '../collate';\nimport { getGlobal } from '../../utils/getGlobal';\nimport { getPath } from '../../utils/getPath';\n\nexport default function bindRouterEvents(inst) {\n  const { context, location, hashRouting: hash } = inst.config;\n  inst.popStateSubscription = fromEvent(getGlobal(), POP_STATE).subscribe(\n    (e) => {\n      const path = getPath(hash, location);\n      if (path) {\n        trigger(context, VIRTUAL_PUSHSTATE, [{ path, hash }, e, inst]);\n      }\n    }\n  );\n  inst.listeners = fromEvent(context, VIRTUAL_PUSHSTATE).pipe(\n    collate.apply(inst)\n  );\n  if (hash && !location.hash) {\n    inst.set('/', true, false); // Replace current hash path without executing anythings\n  }\n}\n","import { isObject } from 'deparam.js';\nimport { AMP, EMPTY, TYPEOF_FUNC, TYPEOF_STR } from './constants';\nimport { each, isArr } from './utils';\n\nexport const encode = encodeURIComponent;\n\n/**\n * Builds query string recursively\n * @private\n * @param {string[]} qsList List of query string key value pairs\n * @param {*} key Key\n * @param {*} obj Value\n */\nfunction buildQuery(qsList, key, obj) {\n  if (isObject(obj)) {\n    each(obj, (prop, obKey) => {\n      buildQuery(qsList, `${key}[${isArr(obj) ? EMPTY : obKey}]`, prop);\n    });\n  } else if (typeof obj !== TYPEOF_FUNC) {\n    qsList.push(`${encode(key)}=${encode(obj)}`);\n  }\n}\n\n/**\n * Converts an object to a query string\n * @private\n * @param {object} obj Object which should be converted to a string\n * @returns {string}\n */\nexport function toQueryString(obj) {\n  let qsList = [];\n  if (isObject(obj)) {\n    each(obj, (prop, key) => {\n      buildQuery(qsList, key, prop);\n    });\n    return qsList.join(AMP);\n  }\n  return typeof obj === TYPEOF_STR ? obj : EMPTY;\n}\n","import deparam from 'deparam.js';\nimport { trim } from '../../utils/utils';\nimport { toQueryString } from '../../utils/query';\nimport { assign } from '../../utils/assign';\nimport { QRY } from '../../utils/constants';\n\n/**\n * Resolves and analyzes existing query string\n * @private\n * @param {string} queryString Query string\n * @param {string} hashRouting Flag to test if hash routing is enabled\n */\nexport default function resolveQuery(queryString, hashRouting) {\n  const { location } = this.config;\n  const search = trim(location.search && location.search.substring(1));\n  const existingQuery = trim(\n    hashRouting ? location.hash.split(QRY)[1] : search\n  );\n  if (!existingQuery) {\n    return queryString;\n  }\n  return toQueryString(\n    assign(deparam(search), deparam(existingQuery), deparam(queryString))\n  );\n}\n","import { isObject } from 'deparam.js';\nimport { trigger } from '../../utils/triggerEvent';\nimport {\n  VIRTUAL_PUSHSTATE,\n  INVALID_ROUTE,\n  UNDEF,\n  TYPEOF_STR,\n  EMPTY,\n  QRY,\n  REPLACE,\n  PUSH,\n  TYPEOF_BOOL,\n} from '../../utils/constants';\nimport { isValidRoute, trim } from '../../utils/utils';\nimport { toQueryString } from '../../utils/query';\nimport resolveQuery from '../resolveQuery';\nimport { assign } from '../../utils/assign';\n\nexport default function set(route, replace, doExec) {\n  let exec = true;\n  if (typeof doExec === TYPEOF_BOOL) {\n    exec = doExec;\n  }\n  const { preservePath, hashRouting, history } = this.config;\n  const routeObject = assign(\n    { replace, exec },\n    typeof route === TYPEOF_STR ? { route } : route\n  );\n  replace = routeObject.replace;\n  exec = routeObject.exec;\n  let { route: routeStr, queryString } = routeObject;\n  const { preserveQuery, data, pageTitle = null } = routeObject;\n  const routeParts = routeStr.split(QRY);\n  // Check if query string is an object\n  if (isObject(queryString)) {\n    queryString = toQueryString(queryString);\n  }\n  // Resolve to URL query string if it's not explicitly passed\n  queryString = trim(queryString ? queryString : routeParts[1]);\n  routeStr = trim(routeParts[0]);\n  // Check if query preservation is required. Resolve query accordingly\n  if (preserveQuery) {\n    queryString = resolveQuery.apply(this, [queryString, hashRouting]);\n  }\n  if (isValidRoute(routeStr)) {\n    const unmodifiedRoute = routeStr;\n    if (hashRouting) {\n      routeStr = `/#${routeStr}`;\n      // Path preservation should only work for hash routing\n      if (preservePath) {\n        routeStr = `${routeStr.substring(1)}`;\n      }\n    }\n    // Append query string\n    routeStr = `${routeStr}${queryString ? `${QRY + queryString}` : EMPTY}`;\n    history[replace ? REPLACE : PUSH]({ data }, pageTitle, routeStr);\n    if (exec && unmodifiedRoute) {\n      trigger(this.config.context, VIRTUAL_PUSHSTATE, [\n        {\n          path: unmodifiedRoute,\n          hash: hashRouting,\n        },\n        UNDEF,\n        this,\n      ]);\n    }\n  } else {\n    throw new TypeError(INVALID_ROUTE);\n  }\n  return this;\n}\n","import { Observable } from 'rxjs';\nimport { UNDEF } from '../../utils/constants';\nimport { getPath } from '../../utils/getPath';\nimport RouterEvent from '../routerEvent';\n\nexport default function callOnce(isDone) {\n  const { hashRouting: hash, location, init } = this.config;\n  const path = getPath(hash, location);\n  return (observable) =>\n    new Observable((subscriber) => {\n      const subn = observable.subscribe(subscriber);\n      if (!isDone) {\n        isDone = true;\n        if (init && path) {\n          subscriber.next(new RouterEvent([{ path, hash }, UNDEF, this]));\n        }\n      }\n      return () => {\n        subn.unsubscribe();\n      };\n    });\n}\n","import { assign } from '../../utils/assign';\nimport bindRouterEvents from '../bindRouterEvents';\nimport set from '../set';\nimport { HISTORY_UNSUPPORTED, PUSH, TYPEOF_FUNC } from '../../utils/constants';\nimport callOnce from '../callOnce';\nimport { getGlobal } from '../../utils/getGlobal';\n\nexport default class Router {\n  constructor(config) {\n    const { history, location, document } = getGlobal();\n    if (!history[PUSH]) {\n      throw new Error(HISTORY_UNSUPPORTED);\n    }\n    this.config = Object.freeze(\n      assign(\n        {\n          init: true, // Initialize as soon as route handler is attached\n          hashRouting: false, // Switch to hash routing\n          preservePath: false, // Works for hash routing\n          context: document.body, // To change the context of \"vpushstate\" event\n          location, // Should remain unchanged\n          history, // History object\n        },\n        config || {}\n      )\n    );\n    this.__paths__ = [];\n    bindRouterEvents(this);\n  }\n  pipe(...ops) {\n    return this.listeners.pipe(callOnce.apply(this), ...ops);\n  }\n  subscribe(...fns) {\n    return this.pipe().subscribe(...fns);\n  }\n  set(...props) {\n    return set.apply(this, props);\n  }\n  destroy(callback) {\n    if (typeof callback === TYPEOF_FUNC) {\n      callback();\n    }\n    this.popStateSubscription.unsubscribe(); // Unsubscribe popstate event\n    this.__paths__.length = 0;\n  }\n}\n","import { EMPTY, REG_ROUTE_PARAMS } from './constants';\nimport { each } from './utils';\n\n/**\n * Parses current path and returns params object\n * @private\n * @param {string} expr Route expression\n * @param {string} path URL path\n * @returns {object}\n */\nexport function extractParams(expr, path) {\n  const params = {};\n  if (REG_ROUTE_PARAMS.test(expr)) {\n    const pathRegex = new RegExp(\n      expr.replace(/\\//g, '\\\\/').replace(/:[^/\\\\]+/g, '([^\\\\/]+)')\n    );\n    REG_ROUTE_PARAMS.lastIndex = 0;\n    if (pathRegex.test(path)) {\n      const keys = Array.from(expr.match(REG_ROUTE_PARAMS)).map((key) =>\n        key.replace(':', EMPTY)\n      );\n      const values = Array.from(path.match(pathRegex));\n      values.shift();\n      each(keys, (key, index) => {\n        params[key] = values[index];\n      });\n    }\n  }\n  return params;\n}\n","import { trim, isValidRoute, each, oKeys } from '../utils/utils';\nimport queryDeparam, { isObject } from 'deparam.js';\nimport { Observable } from 'rxjs';\nimport {\n  INVALID_ROUTE,\n  CACHED_FIELDS,\n  UNDEF,\n  TYPEOF_BOOL,\n} from '../utils/constants';\nimport { extractParams } from '../utils/params';\nimport Router from '../api/router';\nimport { assign } from '../utils/assign';\n\n/**\n * Operator to compare a specific route\n * @param {string} routeStr Route string\n * @param {Router} routerInstance Current router object [optional]\n * @param {boolean} ignoreCase Ignore case in route string\n */\nexport function route(routeStr, routerInstance, ignoreCase) {\n  if (typeof routerInstance === TYPEOF_BOOL) {\n    ignoreCase = routerInstance;\n    routerInstance = UNDEF;\n  }\n  routeStr = trim(routeStr);\n  if (routerInstance instanceof Router) {\n    const paths = routerInstance.__paths__;\n    if (paths.indexOf(routeStr) === -1) {\n      paths.push(routeStr);\n    }\n  }\n  return (observable) =>\n    new Observable((subscriber) => {\n      const subn = observable.subscribe({\n        next(event) {\n          let incomingRoute = event.route;\n          if (isValidRoute(routeStr)) {\n            if (ignoreCase) {\n              routeStr = routeStr.toLowerCase();\n              incomingRoute = incomingRoute.toLowerCase();\n            }\n            const params = extractParams(routeStr, incomingRoute);\n            const paramsLength = oKeys(params).length;\n            if (incomingRoute === routeStr || paramsLength > 0) {\n              if (paramsLength > 0) {\n                event.params = params;\n              }\n              subscriber.next(event);\n            }\n          } else {\n            subscriber.error(new Error(INVALID_ROUTE));\n          }\n        },\n        error: subscriber.error,\n        complete: subscriber.complete,\n      });\n      return () => {\n        if (routerInstance instanceof Router) {\n          const paths = routerInstance.__paths__;\n          const existingRouteIndex = paths.indexOf(routeStr);\n          if (existingRouteIndex > -1) {\n            paths.splice(existingRouteIndex, 1);\n          }\n        }\n        subn.unsubscribe();\n      };\n    });\n}\n\n/**\n * Converts search and hashSearch strings to object\n * @param {boolean} coerce Flag to enable value typecast\n */\nexport function deparam(coerce) {\n  return (observable) =>\n    new Observable((subscriber) => {\n      const subn = observable.subscribe({\n        next(event) {\n          try {\n            event.search = queryDeparam(event.search, coerce);\n            event.hashSearch = queryDeparam(event.hashSearch, coerce);\n            subscriber.next(event);\n          } catch (e) {\n            subscriber.error(e);\n          }\n        },\n        error: subscriber.error,\n        complete: subscriber.complete,\n      });\n      return () => {\n        subn.unsubscribe();\n      };\n    });\n}\n\n/**\n * Modifies current subscriber to detect errors\n * @param {Router} routerInstance Current router object\n */\nexport function noMatch(routerInstance) {\n  return (observable) =>\n    new Observable((subscriber) => {\n      const subn = observable.subscribe({\n        next(event) {\n          if (routerInstance instanceof Router) {\n            const paths = routerInstance.__paths__;\n            if (paths.length > 0) {\n              const currentRoute = event.route;\n              let match = false;\n              each(paths, (path) => {\n                if (\n                  path === currentRoute ||\n                  oKeys(extractParams(path, currentRoute)).length\n                ) {\n                  return !(match = true);\n                }\n              });\n              if (!match) {\n                event.noMatch = true;\n                subscriber.next(event);\n              }\n            }\n          }\n        },\n        error: subscriber.error,\n        complete: subscriber.complete,\n      });\n      return () => {\n        subn.unsubscribe();\n      };\n    });\n}\n\nfunction deepComparison(first, second, result) {\n  each(oKeys(first), (key) => {\n    if (isObject(first[key]) && isObject(second[key])) {\n      deepComparison(first[key], second[key], result);\n    } else {\n      result.break = first[key] !== second[key];\n    }\n  });\n}\n\n/**\n * Caches incoming routes to avoid calling handler if there is no change\n * @param {string[]} keys\n * @param {boolean} deep\n */\nexport function cache(keys = CACHED_FIELDS, deep) {\n  let cache = {};\n  if (typeof keys === TYPEOF_BOOL) {\n    deep = keys;\n    keys = CACHED_FIELDS;\n  }\n  return (observable) =>\n    new Observable((subscriber) => {\n      const subn = observable.subscribe({\n        next(event) {\n          each(keys, (key) => {\n            if (deep && isObject(event[key]) && isObject(cache[key])) {\n              const result = {};\n              deepComparison(event[key], cache[key], result);\n              if (result.break) {\n                assign(cache, event);\n                subscriber.next(event);\n                return false;\n              }\n            } else if (event[key] !== cache[key]) {\n              assign(cache, event);\n              subscriber.next(event);\n              return false; // break loop\n            }\n          });\n        },\n        error: subscriber.error,\n        complete: subscriber.complete,\n      });\n      return () => {\n        subn.unsubscribe();\n        cache = {};\n      };\n    });\n}\n"],"names":["assign","Object","apply","arguments","POP_STATE","REG_ROUTE_PARAMS","REG_PATHNAME","HISTORY_UNSUPPORTED","INVALID_ROUTE","VIRTUAL_PUSHSTATE","CACHED_FIELDS","AMP","QRY","EMPTY","UNDEF","TYPEOF_STR","_typeof","TYPEOF_BOOL","TYPEOF_UNDEF","TYPEOF_FUNC","STATE","PUSH","concat","REPLACE","getGlobal","globalThis","global","self","isArr","Array","isArray","oKeys","keys","trim","str","isValidRoute","route","test","each","arrayObj","callback","isObject","i","length","key","cont","isNumber","trigger","target","eventType","data","from","Node","el","win","customEvent","CustomEvent","bubbles","cancelable","detail","dispatchEvent","RouterEvent","_createClass","routeInfo","currentEvent","_classCallCheck","routeObject","originalEvent","routerInstance","_routerInstance$confi","config","location","history","path","hashRouting","hash","virtualEvent","pathname","search","substring","hashSearch","split","state","collate","_this","observable","Observable","subscriber","subn","subscribe","next","event","error","complete","unsubscribe","getPath","isHash","bindRouterEvents","inst","_inst$config","context","popStateSubscription","fromEvent","e","listeners","pipe","set","encode","encodeURIComponent","buildQuery","qsList","obj","prop","obKey","push","toQueryString","join","resolveQuery","queryString","existingQuery","deparam","replace","doExec","exec","_this$config","preservePath","routeStr","preserveQuery","_routeObject$pageTitl","pageTitle","routeParts","unmodifiedRoute","TypeError","callOnce","isDone","init","Router","_getGlobal","document","Error","freeze","body","__paths__","value","_this$listeners","_len","ops","_key","_this$pipe","_len2","props","_key2","destroy","extractParams","expr","params","pathRegex","RegExp","lastIndex","match","map","values","shift","index","ignoreCase","paths","indexOf","incomingRoute","toLowerCase","paramsLength","existingRouteIndex","splice","coerce","queryDeparam","noMatch","currentRoute","deepComparison","first","second","result","cache","undefined","deep"],"mappings":"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"}